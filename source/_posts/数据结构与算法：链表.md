---
title: "æ•°æ®ç»“æ„ä¸ç®—æ³•: é“¾è¡¨"
date: 2020-03-03 11:30:00
permalink: post/algorithm-linked-list
categories:
  - Development
  - æ•°æ®ç»“æ„ & ç®—æ³•
tags:
  - LeetCode
  - æå®¢æ—¶é—´
  - Python
---

> æœ¬ç³»åˆ—æ–‡ç« æ˜¯åœ¨å­¦ä¹ æ•°æ®ç»“æ„å’Œç®—æ³•æ—¶è®°å½•çš„å­¦ä¹ ç¬”è®°ï¼Œæ¦‚å¿µè®²è§£éƒ¨åˆ†ä¸»è¦å¼•ç”¨è‡ªã€Šæå®¢æ—¶é—´ã€‹çš„ç›¸å…³ä¸“æ ï¼Œä»£ç å®è·µéƒ¨åˆ†ç”±æœ¬äººé‡‡ç”¨ Python å®ç°ã€‚
> **ç‰ˆæƒå½’æå®¢æ—¶é—´æ‰€æœ‰**ã€‚

## æ¦‚å¿µ

é“¾è¡¨ï¼ˆLinked Listï¼‰ä¸æ•°ç»„ä¸€æ ·ï¼Œä¹Ÿæ˜¯ä¸€ç§çº¿æ€§è¡¨æ•°æ®ç»“æ„ï¼Œä¸è¿‡å®ƒä¸ç”¨ä¸€ç»„è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œè€Œæ˜¯é€šè¿‡æŒ‡é’ˆçš„å½¢å¼ï¼Œå°†é›¶æ•£çš„å†…å­˜å—ä¸²è”èµ·æ¥ã€‚

æ¯ä¸€ä¸ªå†…å­˜å—ç§°ä¸ºé“¾è¡¨çš„`èŠ‚ç‚¹`ã€‚ä¸ºäº†å°†æ‰€æœ‰çš„ç»“ç‚¹ä¸²èµ·æ¥ï¼Œæ¯ä¸ªé“¾è¡¨çš„ç»“ç‚¹é™¤äº†å­˜å‚¨æ•°æ®ä¹‹å¤–ï¼Œè¿˜éœ€è¦è®°å½•é“¾ä¸Šçš„ç›¸é‚»ç»“ç‚¹çš„åœ°å€ï¼Œè®°å½•ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆå«ä½œ`åç»§æŒ‡é’ˆ next`ï¼Œè®°å½•ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆå«ä½œ`å‰é©±æŒ‡é’ˆ previous`ã€‚

æœ€å¸¸è§çš„é“¾è¡¨ç»“æ„æœ‰ï¼šå•é“¾è¡¨ã€åŒå‘é“¾è¡¨å’Œå¾ªç¯é“¾è¡¨ã€‚

### å•é“¾è¡¨ï¼ˆLinked Listï¼‰

![](/images/20190303113412.png)

å•é“¾è¡¨çš„ç‰¹ç‚¹ï¼š

- èŠ‚ç‚¹å­˜å‚¨å†…å®¹ï¼šå½“å‰èŠ‚ç‚¹çš„æ•°æ®`data`ã€åç»§æŒ‡é’ˆ`next`
- å¤´ç»“ç‚¹ï¼šè®°å½•é“¾è¡¨ `åŸºåœ°å€`ï¼Œæœ‰äº†å®ƒï¼Œæˆ‘ä»¬å°±å¯ä»¥éå†å¾—åˆ°æ•´æ¡é“¾è¡¨
- ä¸¤ä¸ªå°¾ç»“ç‚¹ï¼šåç»§æŒ‡é’ˆæŒ‡å‘ `ç©ºåœ°å€NULL`ï¼Œéå†æ—¶ä½œä¸ºå°¾ç»“ç‚¹çš„åˆ¤æ–­æ¡ä»¶

### åŒå‘é“¾è¡¨ï¼ˆDoubly Linked Listï¼‰

![](/images/20190303120311.png)

åŒå‘é“¾è¡¨çš„ç‰¹ç‚¹ï¼š

- èŠ‚ç‚¹å­˜å‚¨å†…å®¹ï¼šå½“å‰èŠ‚ç‚¹çš„æ•°æ®`data`ã€åç»§æŒ‡é’ˆ`next`ã€å‰é©±æŒ‡é’ˆ`previous`ï¼Œç›¸æ¯”äºå•é“¾è¡¨ï¼ŒåŒå‘é“¾è¡¨ä¼šå ç”¨æ›´å¤šçš„å†…å­˜ç©ºé—´
- å¤´ç»“ç‚¹ï¼šè®°å½•é“¾è¡¨ `åŸºåœ°å€`ï¼Œå‰é©±æŒ‡é’ˆæŒ‡å‘ `ç©ºåœ°å€NULL`ï¼Œæœ‰äº†å®ƒï¼Œæˆ‘ä»¬å°±å¯ä»¥éå†å¾—åˆ°æ•´æ¡é“¾è¡¨
- å°¾ç»“ç‚¹ï¼šåç»§æŒ‡é’ˆæŒ‡å‘ `ç©ºåœ°å€NULL`ï¼Œéå†æ—¶ä½œä¸ºå°¾ç»“ç‚¹çš„åˆ¤æ–­æ¡ä»¶

## å¤æ‚åº¦åˆ†æ

ç›¸æ¯”äºæ•°ç»„ï¼Œé“¾è¡¨ä¸»è¦æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

- æ”¹å–„â€œæ’å…¥â€å’Œâ€œåˆ é™¤â€çš„æ•ˆç‡
- ä¸å—å†…å­˜è¿ç»­æ€§çš„é™åˆ¶ï¼Œå¯ä»¥å­˜å‚¨å¤§é‡å…ƒç´ ï¼Œä¾‹å¦‚ blockchain

![](/images/20190303114818.png)

å¯¹åº”çš„å¼Šç«¯å°±æ˜¯ï¼Œéšæœºè®¿é—®æ•ˆç‡è¾ƒä½ï¼Œéœ€è¦æ ¹æ®æŒ‡é’ˆä¸€ä¸ªç»“ç‚¹ä¸€ä¸ªç»“ç‚¹åœ°ä¾æ¬¡éå†ï¼Œç›´åˆ°æ‰¾åˆ°ç›¸åº”çš„ç»“ç‚¹ã€‚

å•é“¾è¡¨å’ŒåŒå‘é“¾è¡¨åœ¨éšæœºè®¿é—®ã€æŸ¥è¯¢æ“ä½œæ—¶çš„æ—¶é—´å¤æ‚åº¦ç›¸åŒï¼š

- Access: O(n)
- Search: O(n)

åœ¨å¯¹é“¾è¡¨è¿›è¡Œâ€œåˆ é™¤â€æ“ä½œæ—¶ï¼Œå­˜åœ¨ä¸¤ç§æƒ…å†µï¼š

ï¼ˆ1ï¼‰åˆ é™¤ç»“ç‚¹ä¸­â€œå€¼ç­‰äºæŸä¸ªç»™å®šå€¼â€çš„ç»“ç‚¹ q
ï¼ˆ2ï¼‰åˆ é™¤ç»™å®šæŒ‡é’ˆæŒ‡å‘çš„ç»“ç‚¹ q

å¯¹äºç¬¬ä¸€ç§æƒ…å†µï¼Œä¸ç®¡æ˜¯å•é“¾è¡¨è¿˜æ˜¯åŒå‘é“¾è¡¨ï¼Œä¸ºäº†æŸ¥æ‰¾åˆ°å€¼ç­‰äºç»™å®šå€¼çš„ç»“ç‚¹ï¼Œéƒ½éœ€è¦ä»å¤´ç»“ç‚¹å¼€å§‹ä¸€ä¸ªä¸€ä¸ªä¾æ¬¡éå†å¯¹æ¯”ï¼Œç›´åˆ°æ‰¾åˆ°å€¼ç­‰äºç»™å®šå€¼çš„ç»“ç‚¹ï¼Œç„¶åå†è¿›è¡Œåˆ é™¤æ“ä½œã€‚æŸ¥è¯¢æ—¶é—´å¤æ‚åº¦ O(n)ï¼Œåˆ é™¤æ—¶é—´å¤æ‚åº¦ O(1)ï¼Œå› æ­¤æ€»ä½“æ—¶é—´å¤æ‚åº¦ä¸º O(1)ã€‚

å¯¹äºç¬¬äºŒç§æƒ…å†µï¼Œå·²ç»ç¡®å®šäº†è¦åˆ é™¤çš„ç»“ç‚¹ï¼Œä½†æ˜¯åˆ é™¤æŸä¸ªç»“ç‚¹ q éœ€è¦çŸ¥é“å…¶å‰é©±èŠ‚ç‚¹ï¼Œå› æ­¤åœ¨æ­¤æƒ…å†µä¸‹å•é“¾è¡¨å’ŒåŒå‘é“¾è¡¨å°±å­˜åœ¨è¾ƒå¤§å·®å¼‚ï¼š

- å•é“¾è¡¨ï¼šéœ€è¦ä»å¤´èŠ‚ç‚¹ä¾æ¬¡éå†ï¼Œæ‰¾åˆ° q èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹ pï¼ˆp->next = qï¼‰ï¼›æŸ¥è¯¢æ—¶é—´å¤æ‚åº¦ O(n)ï¼Œåˆ é™¤æ—¶é—´å¤æ‚åº¦ O(1)ï¼Œå› æ­¤æ€»ä½“æ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚
- åŒå‘é“¾è¡¨ï¼šå¯ç›´æ¥è·å– q èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹ pï¼ˆq->previousï¼‰ï¼›æŸ¥è¯¢æ—¶é—´å¤æ‚åº¦ O(1)ï¼Œåˆ é™¤æ—¶é—´å¤æ‚åº¦ O(1)ï¼Œå› æ­¤æ€»ä½“æ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚

åˆ é™¤çš„ä¼ªä»£ç ï¼š

```c
// å•é“¾è¡¨
while p->next {
  if (p->next = q) {
    break;
  }
  p = p->next;
}
p->next = q->next;
q->next = null;

// åŒå‘é“¾è¡¨
q->previous->next = q->next;
q->next = null;
```

åœ¨å¯¹é“¾è¡¨è¿›è¡Œâ€œæ’å…¥â€æ“ä½œæ—¶ï¼Œæ¯”å¦‚åœ¨é“¾è¡¨çš„æŸä¸ªæŒ‡å®šç»“ç‚¹ï¼ˆqï¼‰å‰é¢æ’å…¥ä¸€ä¸ªç»“ç‚¹ï¼ˆxï¼‰ï¼ŒåŒå‘é“¾è¡¨ä¹Ÿæœ‰æ›´å¤§çš„ä¼˜åŠ¿ï¼š

- å•é“¾è¡¨ï¼šéœ€è¦ä»å¤´èŠ‚ç‚¹ä¾æ¬¡éå†ï¼Œæ‰¾åˆ° q èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹ pï¼ˆp->next = qï¼‰ï¼›æŸ¥è¯¢æ—¶é—´å¤æ‚åº¦ O(n)ï¼Œæ’å…¥æ—¶é—´å¤æ‚åº¦ O(1)ï¼Œå› æ­¤æ€»ä½“æ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚
- åŒå‘é“¾è¡¨ï¼šå¯ç›´æ¥è·å– q èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹ pï¼ˆq->previousï¼‰ï¼›æŸ¥è¯¢æ—¶é—´å¤æ‚åº¦ O(1)ï¼Œæ’å…¥æ—¶é—´å¤æ‚åº¦ O(1)ï¼Œå› æ­¤æ€»ä½“æ—¶é—´å¤æ‚åº¦ä¸º O(1)ã€‚

æ’å…¥çš„ä¼ªä»£ç ï¼š

```c
// å•é“¾è¡¨
while p->next {
  if (p->next = q) {
    break;
  }
  p = p->next;
}
p->next = x;
x->next = q;

// åŒå‘é“¾è¡¨
q->previous->next = x;
x->next = q;
```

## å®æˆ˜

### å…¸å‹é—®é¢˜

**1ã€å®ç°å•é“¾è¡¨ï¼Œæ”¯æŒå¢åˆ æ“ä½œ** ğŸ˜Š

åœ¨ Python è¯­è¨€ä¸­æ²¡æœ‰é“¾è¡¨çš„æ•°æ®ç»“æ„ï¼Œéœ€è¦æ¨¡æ‹Ÿè¿›è¡Œå®ç°ã€‚

å®šä¹‰å•é“¾è¡¨ï¼š

```python
class ListNode:
    def __init__(self, x):
        self.val = x
        self.next = None
```

åˆ›å»ºå•é“¾è¡¨ï¼ˆ5->4->3->2->1->Noneï¼‰ï¼š

![](/images/20190303125857.png)

```python
head = None
for num in [5,4,3,2,1]:
    if not head:
        head = curr = ListNode(num)
    else:
        curr.next = ListNode(num)
        curr = curr.next

return head
```

éå†å•é“¾è¡¨ï¼š

```python
# è¾“å‡º 5ã€4ã€3ã€2ã€1
# head å½“å‰å¯¹åº”èŠ‚ç‚¹ 5
while head:
    print(head.data)
    head = head.next

# éå†å®Œæˆåï¼Œhead is Noneï¼Œé“¾è¡¨ç»“æ„æ¶ˆå¤±

# è‹¥éœ€è¦åœ¨éå†å®Œæˆä»ä¿ç•™é“¾è¡¨ç»“æ„ï¼Œåˆ™éœ€ä½¿ç”¨ä¸€ä¸ªä¸´æ—¶å˜é‡
probe = head
while probe:
    print(probe.data)
    probe = probe.next

# éå†å®Œæˆåï¼Œprobe is Noneï¼Œhead å½“å‰å¯¹åº”èŠ‚ç‚¹ 5
```


<details>
<summary>æ’å…¥å•é“¾è¡¨</summary>

æ’å…¥å•é“¾è¡¨ï¼Œå°† 20 æ’å…¥åˆ° 3 å’Œ 2 ä¹‹é—´ï¼š

![](/images/20190303144425.png)

```python
# head å½“å‰å¯¹åº”èŠ‚ç‚¹ 5
probe = head
while probe:
    if probe.data == 3:
        new_node = Node(20)
        new_node.next = probe.next
        probe.next = new_node
        break
    else:
        probe = probe.next
```
</details>

**2ã€å®ç°å•é“¾è¡¨åè½¬** ğŸ˜Š

<details>
<summary>ç‚¹å‡»æŸ¥çœ‹</summary>

Input: 1->2->3->4->5->NULL
Output: 5->4->3->2->1->NULL

```python
def reverseList(head: ListNode) -> ListNode:
    curr, prev = head, None
    while curr:
        curr.next, prev, curr = prev, curr, curr.next
        # next_temp = curr.next
        # curr.next = prev
        # prev = curr
        # curr = next_temp

    return prev
```

LeetCode: [206. Reverse Linked List]

</details>

**3ã€å®ç°åŒå‘é“¾è¡¨ã€å¾ªç¯é“¾è¡¨ï¼Œæ”¯æŒå¢åˆ æ“ä½œ** ğŸ¤”

<details>
<summary>TODO</summary>

å®šä¹‰åŒå‘é“¾è¡¨ï¼š

```python
class BiNode(object):
    def __init__(self, data, previous=None, next=None):
        self.data = data
        self.previous = previous
        self.next = next
```

</details>

**4ã€å®ç°ä¸¤ä¸ªæœ‰åºçš„é“¾è¡¨åˆå¹¶ä¸ºä¸€ä¸ªæœ‰åºé“¾è¡¨** ğŸ¤”

<details>
<summary>TODO</summary>

</details>

**5ã€å®ç°æ±‚é“¾è¡¨çš„ä¸­é—´ç»“ç‚¹** ğŸ¤”

<details>
<summary>TODO</summary>

</details>

### LeetCode

[debugtalk/geekcode](https://github.com/debugtalk/geekcode)

## å¼•ç”¨

- æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾ | [05 | æ•°ç»„ï¼šä¸ºä»€ä¹ˆå¾ˆå¤šç¼–ç¨‹è¯­è¨€ä¸­æ•°ç»„éƒ½ä»0å¼€å§‹ç¼–å·ï¼Ÿ](https://time.geekbang.org/column/article/40961)
- ç®—æ³•é¢è¯•é€šå…³40è®² | [05 | ç†è®ºè®²è§£ï¼šæ•°ç»„ & é“¾è¡¨](https://time.geekbang.org/course/detail/130-41552)
- ç®—æ³•é¢è¯•é€šå…³40è®² | [06 | åè½¬ä¸€ä¸ªå•é“¾è¡¨&åˆ¤æ–­é“¾è¡¨æ˜¯å¦æœ‰ç¯](https://time.geekbang.org/course/detail/130-41547)
- æ•°æ®ç»“æ„ä¸ç®—æ³•ä¹‹ç¾ | [Day 1ï¼šæ•°ç»„å’Œé“¾è¡¨](https://time.geekbang.org/column/article/80456)

[206. Reverse Linked List]: https://leetcode.com/problems/reverse-linked-list/
[linked-list-cycle]: https://leetcode.com/problems/linked-list-cycle
[swap-nodes-in-pairs]: https://leetcode.com/problems/swap-nodes-in-pairs
[linked-list-cycle-ii]: https://leetcode.com/problems/linked-list-cycle-ii
[reverse-nodes-in-k-group]: https://leetcode.com/problems/reverse-nodes-in-k-group/
